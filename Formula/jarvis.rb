# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Jarvis < Formula
  desc "Onchain (EVM compatible) operation made easy"
  homepage "https://github.com/tranvictor/jarvis"
  version "0.0.23"

  on_macos do
    url "https://github.com/tranvictor/jarvis/releases/download/v0.0.23/jarvis_0.0.23_macOS_amd64.tar.gz"
    sha256 "f998d223a15b6ae16ce0557c1ac6d9b6198cf99b870d7a083380c3c66d018840"

    def install
      system "make", "jarvis" if build.head?
      bin.install "bin/jarvis"
    end

    if Hardware::CPU.arm?
      def caveats
        <<~EOS
          The darwin_arm64 architecture is not supported for the Jarvis
          formula at this time. The darwin_amd64 binary may work in compatibility
          mode, but it might not be fully supported.
        EOS
      end
    end
  end

  on_linux do
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/tranvictor/jarvis/releases/download/v0.0.23/jarvis_0.0.23_linux_arm64.tar.gz"
      sha256 "ffd6fa9920adaf807fe425c85d202548e5e7ff48906b36e96d6f83796442f39f"

      def install
        system "make", "jarvis" if build.head?
        bin.install "bin/jarvis"
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/tranvictor/jarvis/releases/download/v0.0.23/jarvis_0.0.23_linux_amd64.tar.gz"
      sha256 "f6d4cddc7cb5cc33382ea9f37ddc97c3abf7de40a1751ff3209a602bc06b2018"

      def install
        system "make", "jarvis" if build.head?
        bin.install "bin/jarvis"
      end
    end
  end

  head do
    url "https://github.com/tranvictor/jarvis.git"
    depends_on "go"
  end

  test do
    help_text = shell_output("jarvis -h")
    assert_includes help_text, "Usage:"
  end
end
